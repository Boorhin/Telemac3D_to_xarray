# Telemac3D_to_xarray
A script to convert a Selafin file from Telemac 3D into a Xarray file tentatively compliant with CF convention and U-Grid.
## Disclaimer
* This has only be tested on a very **limited** case of Selafin files we use in our studies.
* The reading of Selafin file is possible only if you have properly installed Telemac 3D on your computer. 
We do not provide the scripts as they are not maintained on git but SVN.
* It is uncertain that the Dask implementation is made in the most optimal way.

## To do
* The remapping variable function should be implemented for **all** the potential variables generated by Telemac into a standard name. 
Support from Telemac to provide the list of Selafin variables [has been asked but not yet answered yet]
(http://www.opentelemac.org/index.php/kunena/scripts/13550-mapping-telemac3d-variables-into-cf-compliant-variables).
* Check that the files are actually close to be compliant with the standards. At the moment it seems functional but proper testing is needed.
* add options to optimise the zarr and the xarray datasets (chunks and compression)
* Make the logger to display the informations of progress
## Usage

``` python
from datetime import datetime
import Telemac3D_to_Xarray
slf_file= 'somefile.slf'
name = 'overwriting the name of the selafin file'
#There is a bug in Telamac not outputting the starting date of models
start_time=datetime(year=1997,day=4, month=8,hour=2,minute=14) 
#Building up your Dask distribution. This is a bit experimental at the moment.
nb_workers, threads_workers, RAM_limit=8, 2, '1GB')
# Build the X_array
a = T3D_Xr(filename=slf_file, name=None, start_time=None, n_workers=nb_workers,
                threads=threads_workers, memory_limit=RAM_limit
path_to_zarr_store='/somewhere/on/my/Disk/My_zarr'
# write it on disk
T3D_Xr.write_array(path_to_zarr_store)
```
